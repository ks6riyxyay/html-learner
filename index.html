<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>W3Clone Ultimate</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
--green:#04aa6d;
--bg:#ffffff;
--text:#000;
--panel:#f1f1f1;
}
body.dark{
--bg:#1d1f27;
--text:#eee;
--panel:#2b2e3b;
}
*{box-sizing:border-box}
body{
margin:0;
font-family:Segoe UI,Arial;
background:var(--bg);
color:var(--text);
height:100vh;
display:flex;
flex-direction:column;
}

/* Top */
.top{
display:flex;
justify-content:space-between;
align-items:center;
padding:10px 20px;
border-bottom:1px solid #ccc;
}
.logo{font-size:28px;font-weight:900;color:var(--green)}
.toggle{cursor:pointer}

/* Layout */
.wrap{flex:1;display:flex;overflow:hidden}

/* Sidebar */
.side{
width:260px;
background:var(--panel);
overflow:auto;
padding-bottom:50px;
}
.side h4{margin:15px}
.side a{
display:block;
padding:8px 15px;
cursor:pointer;
}
.side a.active{background:var(--green);color:white}

/* Content */
.main{
flex:1;
padding:30px;
overflow:auto;
}
h1{font-size:40px}

/* Buttons */
.btn{
background:var(--green);
color:white;
border:none;
padding:10px 20px;
font-weight:bold;
cursor:pointer;
border-radius:4px;
}

/* Editor */
.editor{
background:#e7e9eb;
padding:20px;
margin:20px 0;
border-left:5px solid var(--green);
}
textarea{
width:100%;
height:200px;
font-family:monospace;
font-size:15px;
}
iframe{
width:100%;
height:200px;
border:1px solid #ccc;
background:white;
}

/* Quiz */
.quiz label{display:block;margin:8px 0}

/* Progress */
.progress{
margin:10px 0;
font-size:14px;
}
</style>
</head>

<body>
<div class="top">
<div class="logo">W3Clone</div>
<div>
<button class="btn" onclick="toggleDark()">ðŸŒ™ Dark</button>
</div>
</div>

<div class="wrap">
<div class="side" id="side"></div>
<div class="main" id="main"></div>
</div>

<script>
/* ---------- DATA ---------- */
const lessons = {
HTML:[
{ id:"html1", title:"HTML Intro", content:`
<h1>HTML Introduction</h1>
<p>HTML is the backbone of the web.</p>
${sandbox(`<h1>Hello World</h1>`)}
${quiz("html1")}
`},
],
CSS:[
{ id:"css1", title:"CSS Intro", content:`
<h1>CSS Introduction</h1>
<p>CSS styles HTML.</p>
${sandbox(`<style>h1{color:red}</style><h1>Red</h1>`)}
${quiz("css1")}
`},
],
JS:[
{ id:"js1", title:"JS Intro", content:`
<h1>JavaScript Introduction</h1>
<p>JS adds interactivity.</p>
${sandbox(`<button onclick="alert('Hi')">Click</button>`)}
${quiz("js1")}
`},
]
};

/* ---------- UI BUILD ---------- */
const side=document.getElementById("side");
Object.keys(lessons).forEach(course=>{
let h=document.createElement("h4");
h.textContent=course;
side.appendChild(h);
lessons[course].forEach(l=>{
let a=document.createElement("a");
a.textContent=l.title;
a.onclick=()=>loadLesson(course,l.id);
a.id=l.id;
side.appendChild(a);
});
});

function loadLesson(course,id){
const lesson=lessons[course].find(l=>l.id===id);
document.getElementById("main").innerHTML=`
<div class="progress">Progress: ${getProgress()}%</div>
${lesson.content}
`;
document.querySelectorAll(".side a").forEach(a=>a.classList.remove("active"));
document.getElementById(id).classList.add("active");
saveProgress(id);
}

/* ---------- SANDBOX ---------- */
function sandbox(code){
return `
<div class="editor">
<textarea>${code}</textarea>
<button class="btn" onclick="run(this)">Run</button>
<iframe></iframe>
</div>`;
}
function run(btn){
const box=btn.previousElementSibling.value;
btn.nextElementSibling.srcdoc=box;
}

/* ---------- QUIZ ---------- */
function quiz(id){
return `
<div class="quiz">
<h3>Quiz</h3>
<label><input type="radio" name="${id}" value="1"> Correct</label>
<label><input type="radio" name="${id}" value="0"> Wrong</label>
<button class="btn" onclick="grade('${id}')">Submit</button>
</div>`;
}
function grade(id){
const v=document.querySelector(`input[name="${id}"]:checked`);
alert(v && v.value==1?"Correct!":"Wrong!");
}

/* ---------- PROGRESS ---------- */
function saveProgress(id){
let done=JSON.parse(localStorage.getItem("done")||"[]");
if(!done.includes(id)){done.push(id)}
localStorage.setItem("done",JSON.stringify(done));
}
function getProgress(){
let total=0,done=JSON.parse(localStorage.getItem("done")||"[]");
Object.values(lessons).forEach(c=>total+=c.length);
return Math.round(done.length/total*100);
}

/* ---------- DARK MODE ---------- */
function toggleDark(){
document.body.classList.toggle("dark");
localStorage.setItem("dark",document.body.classList.contains("dark"));
}
if(localStorage.getItem("dark")==="true")document.body.classList.add("dark");

/* ---------- START ---------- */
loadLesson("HTML","html1");
</script>
</body>
</html>
